# seo的两种方式

## 一、服务端渲染

### 1、SSR的局限

  -	服务端压力较大
  本来是通过客户端完成渲染，现在统一到服务端node服务去做。尤其是高并发访问的情况，会大量占用服务端CPU资源；
  -	开发条件受限
  在服务端渲染中，created和beforeCreate之外的生命周期钩子不可用，因此项目引用的第三方的库也不可用其它生命周期钩子，这对引用库的选择产生了很大的限制；
  那么以前spa应用中，在created中创建一个setInterval，然后在destroyed中将其销毁的类似操作就不能出现了，服务器渲染期间不会调用销毁钩子函数，所以这个定时器会永远保留下来，服务器很容易就崩了
  -	学习成本相对较高
  除了对webpack、Vue要熟悉，还需要掌握node、Express相关技术。相对于客户端 渲染，项目构建、部署过程更加复杂。

### 2、使用服务器端渲染 (SSR) 时还需要有一些权衡之处【使用 Vue SSR（nuxt）的一些坑】：

  -	开发条件所限。浏览器特定的代码，只能在某些生命周期钩子函数 (lifecycle hook) 中使用；一些外部扩展库 (external library) 可能需要特殊处理，才能在服务器渲染应用程序中运行。
  -	涉及构建设置和部署的更多要求。与可以部署在任何静态文件服务器上的完全静态单页面应用程序 (SPA) 不同，服务器渲染应用程序，需要处于 Node.js server 运行环境。（服务端必须是 node.js 或者专门跑个 node.js 来支持； ）
  -	更多的服务器端负载。在 Node.js 中渲染完整的应用程序，显然会比仅仅提供静态文件的 server 更加大量占用 CPU 资源 (CPU-intensive - CPU 密集)，因此如果你预料在高流量环境 (high traffic) 下使用，请准备相应的服务器负载，并明智地采用缓存策略。
  -	document 对象找不到，由于前端使用的 window，在 node 环境不存在； 
  -	数据预获取时，组件尚未实例化（无法使用 this ），于是在 created 生命钩子调用 method 里的方法行不通，数据请求及格式化等操作都应该放置在专门的数据预取存储容器（data store）或"状态容器（state container）"中处理； 
  -	string-based 模板性能肯定要比 virtual-dom-based 模板的性能好。string-base 模板只要填数据即可，virtual-dom-based 模板需要经历 Vue 模板语法 ---> Vnode ---> 拼接字符串 html 的过程。 有关性能的消耗对比，可以参考这篇文章 https://mp.weixin.qq.com/s?__biz=MzIwNjQ... ；
  -	缓存方面，只能做到页面级的缓存。如果用户特定（user-specific），即对于不同用户需要渲染不同内容，缓存是不可用的。 

## 二、客户端预渲染

vue-meta-info + prerender-spa-plugin

-	核心：prerender-spa-plugin
-	无需服务器实时动态编译，采用预渲染，在构建时针对特定路由简单的生成静态HTML文件
-	优点：
    - 几乎可以获得服务端渲染的所有优点，没有缺点
    - 加载应用程序的路由，将结果保存在一个静态的HTML文件中
    - 无需更改代码或 添加服务器端
-	缺点：
    - 若网站有成百上千条路线，预编译会非常的慢
    - 虽每次更新只需要一次但会需要更长的时间
-	适用场景：
      只需改善少数页面的SEO，可以采用预渲染
 -	什么场景下不适合使用预渲染：
  个性化内容：对于路由是 /my-profile 的页面来说，预渲染就失效了。因为页面内容依据看它的人而显得不同；
  经常变化的内容：如果你预渲染一个游戏排行榜，这个排行榜会随着新的玩家记录而更新，预渲染会让你的页面显示不正确直到脚本加载完成并替换成新的数据。这是一个不好的用户体验；
  成千上万的路由：不建议预渲染非常多的路由，因为这会严重拖慢你的构建进程。

## 三、服务端渲染 对比 预渲染(Prerendering)

-	如果你只是用服务端渲染来改善一个少数的营销页面（如 首页，关于，联系 等等）的SEO，那你可以用预渲染替换。
-	预渲染不像服务器渲染那样即时编译HTML,预渲染只是在构建时为了特定的路由生成特定的几个静态页面。其优势是预渲染的设置更加简单，可以保持前端是一个完整的静态站。
-	你用webpack可以很简单地通过prerender-spa-plugin来添加预渲染，它被广泛地用在Vue应用上 - 事实上，创建者也是Vue核心团队成员之一。
-	预渲染能与服务端渲染一样提高 SEO 优化，但前者比后者需要更少的配置，实现成本低。弱网环境下，预渲染能更快地呈现页面内容，减少页面可见时间。
-	与 Vue SSR（Server-Side Rendering）（服务端渲染）相比 ，prerendering 实现更简单且直接。前者更容易使用过度，除非你处理的是非常多的路由，另外，两者都可以达到基本相同的 SEO 结果。